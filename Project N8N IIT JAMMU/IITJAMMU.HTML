<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0"/>
  <title>Subscribe to Daily AI News</title>
  <style>
    * {
      margin: 0;
      padding: 0;
      box-sizing: border-box;
    }
    body {
      font-family: 'Orbitron', sans-serif;
      background: #0a0a1a;
      overflow: hidden;
      height: 100vh;
      display: flex;
      justify-content: center;
      align-items: center;
      position: relative;
    }
    canvas {
      position: fixed;
      top: 0;
      left: 0;
      width: 100%;
      height: 100%;
      z-index: 1;
      opacity: 0.8;
    }
    .card {
      background: rgba(20, 20, 40, 0.7);
      backdrop-filter: blur(10px);
      padding: 2rem;
      border-radius: 1rem;
      box-shadow: 0 0 20px rgba(255, 0, 255, 0.5), 0 0 40px rgba(0, 255, 255, 0.3);
      max-width: 400px;
      width: 90%;
      z-index: 2;
      border: 1px solid rgba(255, 255, 255, 0.1);
      animation: glitch 2s infinite;
    }
    @keyframes glitch {
      0%, 100% { transform: translate(0); }
      20% { transform: translate(-2px, 2px); }
      40% { transform: translate(2px, -2px); }
    }
    .hidden {
      display: none;
    }
    h2 {
      margin-bottom: 1rem;
      color: #ff00ff;
      text-shadow: 0 0 10px #ff00ff, 0 0 20px #00ffff;
      font-size: 1.8rem;
      text-align: center;
    }
    input {
      width: 100%;
      padding: 0.75rem;
      margin-bottom: 1rem;
      border-radius: 0.5rem;
      border: 1px solid #00ffff;
      background: rgba(0, 0, 0, 0.5);
      color: #fff;
      font-size: 1rem;
      transition: box-shadow 0.3s;
    }
    input:focus {
      outline: none;
      box-shadow: 0 0 10px #00ffff, 0 0 20px #ff00ff;
    }
    button {
      width: 100%;
      padding: 0.75rem;
      border: none;
      background: linear-gradient(45deg, #ff00ff, #00ffff);
      color: #000;
      font-size: 1rem;
      font-weight: bold;
      border-radius: 0.5rem;
      cursor: pointer;
      transition: transform 0.3s, box-shadow 0.3s;
    }
    button:hover {
      transform: scale(1.05);
      box-shadow: 0 0 15px #ff00ff, 0 0 30px #00ffff;
    }
    .success {
      text-align: center;
      color: #00ffff;
      text-shadow: 0 0 10px #00ffff;
    }
    p {
      color: #fff;
      text-align: center;
      text-shadow: 0 0 5px #ff00ff;
    }
  </style>
  <link href="https://fonts.googleapis.com/css2?family=Orbitron:wght@400;700&display=swap" rel="stylesheet">
</head>
<body>
  <canvas id="bgCanvas"></canvas>
  <div class="card">
    <!-- Step 1 -->
    <div id="subscribe-form">
      <h2>Join Our AI Newsletter</h2>
      <input type="text" name="name" placeholder="Your name" required />
      <input type="email" name="email" placeholder="Your email" required />
      <button type="button" onclick="submitForm()">Subscribe Now</button>
    </div>

    <!-- Step 2 -->
    <div id="success-message" class="hidden">
      <h2 class="success">ðŸŽ‰ You're subscribed!</h2>
      <p>We'll send you fresh AI news daily!</p>
    </div>
  </div>

  <script>
    // Canvas background with cyberpunk city and cars
    const canvas = document.getElementById('bgCanvas');
    const ctx = canvas.getContext('2d');
    canvas.width = window.innerWidth;
    canvas.height = window.innerHeight;

    const buildings = [];
    const cars = [];
    const colors = ['#ff00ff', '#00ffff', '#ff0000', '#00ff00'];

    // Generate buildings
    for (let i = 0; i < 20; i++) {
      buildings.push({
        x: i * 100,
        y: canvas.height - Math.random() * 300 - 100,
        width: 80,
        height: Math.random() * 200 + 100,
        color: colors[Math.floor(Math.random() * colors.length)]
      });
    }

    // Generate cars
    for (let i = 0; i < 5; i++) {
      cars.push({
        x: Math.random() * canvas.width,
        y: canvas.height - 50 - Math.random() * 100,
        speed: Math.random() * 2 + 1,
        color: colors[Math.floor(Math.random() * colors.length)]
      });
    }

    function animate() {
      ctx.fillStyle = 'rgba(10, 10, 26, 0.5)';
      ctx.fillRect(0, 0, canvas.width, canvas.height);

      // Draw buildings
      buildings.forEach(b => {
        ctx.fillStyle = b.color;
        ctx.fillRect(b.x, b.y, b.width, b.height);
        ctx.fillStyle = 'rgba(255, 255, 255, 0.2)';
        for (let j = 0; j < 10; j++) {
          ctx.fillRect(b.x + 10, b.y + j * 20 + 10, 10, 10);
        }
      });

      // Draw and move cars
      cars.forEach(c => {
        ctx.fillStyle = c.color;
        ctx.fillRect(c.x, c.y, 40, 20);
        c.x += c.speed;
        if (c.x > canvas.width) c.x = -40;
      });

      requestAnimationFrame(animate);
    }
    animate();

    // Form submission
    async function submitForm() {
      const form = document.getElementById('subscribe-form');
      const success = document.getElementById('success-message');
      const formData = new FormData(form.querySelectorAll('input'));
      const payload = new URLSearchParams(formData);

      const webhookUrl = 'https://labsabhiverma.app.n8n.cloud/webhook-test/7d982107-35cd-4641-9802-896d4c49b102';

      try {
        const res = await fetch(webhookUrl, {
          method: 'POST',
          body: payload,
        });

        if (res.ok) {
          form.classList.add('hidden');
          success.classList.remove('hidden');
        } else {
          alert('There was a problem. Try again!');
        }
      } catch (error) {
        alert('There was a problem. Try again!');
      }
    }
  </script>
</body>
</html>